version: 2.1

variables:
  location: "w8s-migration"
  # dependency: 
  #   migration:
  #     url: git@github.com:workshop-80s/migration.git
  #     dir: w8s-migration
  #     branch: init

jobs:
  build: # this can be any name you choose  build:             echo "${{ variable.ssh_key }}" > ~/.ssh/id_rsa

    docker:
      - image: cimg/base:2023.03
    steps:
      - checkout
      - run: 
          name: "list dir"
          command: echo $(location)
      # - run:
      #     name: Setup github
      #     command: |
      #       mkdir -p ~/.ssh 
      #       echo "$j3ns_devops" > ~/.ssh/id_rsa
            
      #       chmod 600 ~/.ssh/id_rsa
      #       ssh-keyscan github.com >> ~/.ssh/known_hosts
      # - run: 
      #     name: "list dir"
      #     command: ls -la
      # - run: 
      #     name: "clone migration"
      #     command: | 
      #       git clone git@github.com:workshop-80s/migration.git ${{ dir }}
      #       cd ./${{ dir }}
      #       git checkout init
      #       git pull origin init
  # test:  
  #   docker:
  #     - image: cimg/base:2023.03
  #   steps:
  #     - checkout              
  #     - run: echo "test hello world"

workflows:
  initiate:
    jobs:
      - build:
          context:
            - github
          
      # - test
